<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE ROOT [
<!ENTITY SUBTREE_FILTER                          "Filter_Type:SUBTREE">
<!ENTITY PORTMON                                 "/sessions">
<!ENTITY PORTMON_SESSION                         "&PORTMON;/session">
<!ENTITY PORTMON_SESSION_ID                      "&PORTMON;/session/id=${v_sessionid}">
<!ENTITY PORTMON_SESSION_DESC                    "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/descript">
<!ENTITY PORTMON_SESSION_SHUT                    "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/disable">
<!ENTITY PORTMON_SPAN_SOURCE_IF                  "&PORTMON_SESSION;/source-intf[]">
<!ENTITY PORTMON_SPAN_SOURCE_IF_NAME             "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/source-intf[]/name">
<!ENTITY PORTMON_SPAN_SOURCE_PO_IF               "&PORTMON_SESSION;/source-intf[]">
<!ENTITY PORTMON_SPAN_SOURCE_PO_IF_NAME          "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/source-intf[]/name">
<!ENTITY PORTMON_SPAN_SOURCE_VLAN_IF             "&PORTMON_SESSION;/source-intf[]">
<!ENTITY PORTMON_SPAN_SOURCE_VLAN_IF_NAME        "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/source-intf[]/name">
<!ENTITY PORTMON_SPAN_SOURCE_VLAN_DIR            "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/source-intf[]/direction">
<!ENTITY PORTMON_SPAN_DEST_IF_NAME               "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/destination-interface">
<!ENTITY PORTMON_SPAN_DEST_PO_IF_NAME            "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/destination-interface">
<!ENTITY PORTMON_SPAN_DEST_REMOTE_VLAN           "&PORTMON_SESSION_ID;,&PORTMON_SESSION;/destination-remote-vlan">
]>
<ROOT>
<MACRODEF name="SPAN_SOURCE_IF">
    <PARAM
        name="span-src-switch"
        help="span source interface commands"
        mode="switch"
        ptype="STRING"
        >
        <PARAM
            name="interface"
            help="Select an interface"
            ptype="SUBCOMMAND"
            mode="subcommand"
            >
            <PARAM
                name="if-switch"
                help="Interface commands"
                mode="switch"
                ptype="STRING"
                >
                <PARAM
                    name="if-name"
                    help="Ethernet interface"
                    ptype="ETHER_INTERFACE_RANGE"
                    sub_oper_yang="arg1:source-intf"
                    yang_key="/sessions/session/source-intf/name"
                    yang_name="&PORTMON_SPAN_SOURCE_IF_NAME;=${if-name}"
                    >
                    <PARAM
                        name="if_direction"
                        help="Direction of monitored ports"
                        ptype="DIRECTION"
                        optional="true"
                        default="both"
                        yang_name="&PORTMON_SPAN_SOURCE_IF;/direction=${if_direction}"
                        />
                </PARAM>
                <PARAM
                    name="po-if-name"
                    help="Port-channel interface"
                    ptype="PO_INTERFACE_RANGE"
                    sub_oper_yang="arg1:source-intf"
                    yang_key="/sessions/session/source-intf/name"
                    yang_name="&PORTMON_SPAN_SOURCE_PO_IF_NAME;=${po-if-name}"
                    db_flag="SKIP_TREE"
                    >
                    <PARAM
                        name="po_direction"
                        help="Direction of monitored ports"
                        ptype="DIRECTION"
                        optional="true"
                        default="both"
                        yang_name="&PORTMON_SPAN_SOURCE_PO_IF;/direction=${po_direction}"
                        />
                </PARAM>
                <PARAM
                    name="vlan-if-name"
                    help="Vlan interface"
                    ptype="VLAN_INTERFACE_RANGE"
                    sub_oper_yang="arg1:source-intf"
                    yang_name="&PORTMON_SPAN_SOURCE_VLAN_IF_NAME;=${vlan-if-name},&PORTMON_SPAN_SOURCE_VLAN_IF;/direction=rx"
                    db_flag="SKIP_TREE"
                    >
                    <PARAM
                        name="rx"
                        help="Direction of monitored ports"
                        mode="subcommand"
                        ptype="SUBCOMMAND"
                        optional="true"
                        default="rx"
                        />
                </PARAM>
            </PARAM>
        </PARAM>
    </PARAM>
</MACRODEF>

<MACRODEF name="SPAN_DEST_IF">
    <PARAM
        name="if-switch"
        help="Interface commands"
        mode="switch"
        ptype="STRING"
        >
        <PARAM
            name="if-name"
            help="Ethernet interface"
            ptype="PHY_INTERFACE"
            sub_oper_yang="arg1:destination-interface"
            yang_name="&PORTMON_SPAN_DEST_IF_NAME;=${if-name}"
            />
        <PARAM
            name="po-if-name"
            help="Port-channel interface"
            ptype="PO_INTERFACE"
            sub_oper_yang="arg1:destination-interface"
            yang_name="&PORTMON_SPAN_DEST_PO_IF_NAME;=${po-if-name}"
            />
    </PARAM>
</MACRODEF>



<MACRODEF name = "MACRO_FLOW_ENABLE" >
    <PARAM
        name="enable"
        help="Enable flow-based monitoring"
        ptype="SUBCOMMAND"
        mode="subcommand"
        default_oper="merge"
        sub_oper_yang="arg1:flow-enabled"
        yang_name="&PORTMON_SESSION_ID;,/sessions/session/flow-enabled"
        />
</MACRODEF>
</ROOT>
